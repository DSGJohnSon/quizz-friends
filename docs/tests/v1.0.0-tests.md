# Guide de Test Complet - Quiz Friends

Ce document dÃ©taille **tous les tests Ã  effectuer** pour valider le bon fonctionnement de l'application.

## ðŸ“‹ PrÃ©requis avant les tests

1. âœ… Base de donnÃ©es PostgreSQL configurÃ©e
2. âœ… Variables d'environnement `.env` remplies
3. âœ… Migrations Prisma exÃ©cutÃ©es (`npx prisma migrate dev`)
4. âœ… Serveur de dÃ©veloppement lancÃ© (`npm run dev`)
5. âœ… Supabase Realtime activÃ©

---

## ðŸ§ª Parcours 1 : CrÃ©ation et Publication de Session

### Objectif

Tester la crÃ©ation d'une session et sa publication.

### Ã‰tapes

1. **AccÃ©der Ã  la page d'accueil**

   - URL : `http://localhost:3000`
   - âœ… VÃ©rifier affichage du titre "Quiz Friends"
   - âœ… VÃ©rifier prÃ©sence des 2 boutons

2. **AccÃ©der au panneau d'administration**

   - Cliquer sur "Panneau d'administration"
   - URL attendue : `http://localhost:3000/host`
   - âœ… VÃ©rifier affichage "Aucune session crÃ©Ã©e pour le moment"
   - âœ… VÃ©rifier prÃ©sence du bouton "Nouvelle session"

3. **CrÃ©er une nouvelle session**

   - Cliquer sur "Nouvelle session"
   - URL attendue : `http://localhost:3000/host/create`
   - Remplir le formulaire :
     - Titre : "Test Quiz v1"
     - Description : "Session de test pour validation"
     - Nombre de joueurs : 4
   - Cliquer sur "CrÃ©er la session"
   - âœ… VÃ©rifier redirection vers `/host/[sessionId]`
   - âœ… VÃ©rifier affichage du titre "Test Quiz v1"
   - âœ… VÃ©rifier badge de statut "DRAFT"
   - âœ… VÃ©rifier prÃ©sence du bouton "Publier la session"

4. **Publier la session**
   - Cliquer sur "Publier la session"
   - âœ… VÃ©rifier changement de statut vers "OPEN"
   - âœ… VÃ©rifier affichage du code de session (6 caractÃ¨res)
   - âœ… VÃ©rifier prÃ©sence du bouton "Fermer les inscriptions"
   - âœ… Noter le code de session pour les tests suivants

---

## ðŸ§ª Parcours 2 : Affichage TV et QR Code

### Objectif

Tester l'affichage sur l'Ã©cran TV et la gÃ©nÃ©ration du QR code.

### Ã‰tapes

1. **Ouvrir l'Ã©cran TV**

   - Ouvrir un nouvel onglet/fenÃªtre
   - URL : `http://localhost:3000/game/[sessionId]` (remplacer par l'ID de votre session)
   - âœ… VÃ©rifier fond dÃ©gradÃ© violet/bleu
   - âœ… VÃ©rifier affichage du titre "Test Quiz v1"
   - âœ… VÃ©rifier affichage du QR code
   - âœ… VÃ©rifier affichage du code de session sous le QR code
   - âœ… VÃ©rifier texte "Joueurs connectÃ©s"
   - âœ… VÃ©rifier message "En attente de joueurs..."

2. **VÃ©rifier le QR code**
   - Scanner le QR code avec un tÃ©lÃ©phone
   - âœ… VÃ©rifier que l'URL contient `/player?session=[CODE]`
   - âœ… VÃ©rifier que le code correspond Ã  celui affichÃ©

---

## ðŸ§ª Parcours 3 : Inscription des Joueurs

### Objectif

Tester l'inscription de plusieurs joueurs et la synchronisation temps rÃ©el.

### PrÃ©paration

- Avoir 3-4 devices/onglets disponibles (tÃ©lÃ©phones, tablettes, ou onglets de navigateur)
- Garder ouvert : `/host/[sessionId]` et `/game/[sessionId]`

### Ã‰tapes - Joueur 1 (Alice)

1. **AccÃ©der Ã  la page joueur**

   - Scanner le QR code OU aller sur `http://localhost:3000/player?session=[CODE]`
   - âœ… VÃ©rifier affichage du formulaire de connexion
   - âœ… VÃ©rifier que le code est prÃ©-rempli (si QR scannÃ©)

2. **Rejoindre la session**

   - Saisir le code si nÃ©cessaire
   - Saisir le nom : "Alice"
   - Cliquer sur "Rejoindre"
   - âœ… VÃ©rifier redirection vers `/player/[sessionId]?playerId=[ID]`
   - âœ… VÃ©rifier affichage de la salle d'attente
   - âœ… VÃ©rifier affichage du cercle de couleur (rouge normalement)
   - âœ… VÃ©rifier affichage du nom "Alice"
   - âœ… VÃ©rifier texte "En attente des autres joueurs..."
   - âœ… VÃ©rifier compteur "Joueurs (1/4)"

3. **VÃ©rifier synchronisation temps rÃ©el**
   - Sur `/host/[sessionId]` :
     - âœ… VÃ©rifier apparition de "Alice" dans la liste des joueurs
     - âœ… VÃ©rifier compteur "Joueurs (1/4)"
     - âœ… VÃ©rifier point vert de connexion
   - Sur `/game/[sessionId]` :
     - âœ… VÃ©rifier apparition de "Alice" dans la grille
     - âœ… VÃ©rifier couleur du cercle

### Ã‰tapes - Joueur 2 (Bob)

1. **Rejoindre avec un autre device**

   - Scanner le QR code ou aller sur `/player?session=[CODE]`
   - Saisir le nom : "Bob"
   - Cliquer sur "Rejoindre"
   - âœ… VÃ©rifier redirection rÃ©ussie
   - âœ… VÃ©rifier couleur diffÃ©rente d'Alice (bleu normalement)
   - âœ… VÃ©rifier liste affiche "Alice" et "Bob"
   - âœ… VÃ©rifier compteur "Joueurs (2/4)"

2. **VÃ©rifier synchronisation**
   - Sur `/host` : âœ… VÃ©rifier "Bob" apparaÃ®t
   - Sur `/game` : âœ… VÃ©rifier "Bob" apparaÃ®t
   - Sur device d'Alice : âœ… VÃ©rifier "Bob" apparaÃ®t

### Ã‰tapes - Joueur 3 (Charlie)

1. **Rejoindre**
   - Nom : "Charlie"
   - âœ… VÃ©rifier couleur verte
   - âœ… VÃ©rifier compteur "Joueurs (3/4)"
   - âœ… VÃ©rifier synchronisation sur toutes les interfaces

### Ã‰tapes - Joueur 4 (Diana)

1. **Rejoindre**
   - Nom : "Diana"
   - âœ… VÃ©rifier couleur ambre/orange
   - âœ… VÃ©rifier compteur "Joueurs (4/4)"
   - âœ… VÃ©rifier synchronisation sur toutes les interfaces

---

## ðŸ§ª Parcours 4 : Gestion des Doublons de Noms

### Objectif

Tester la gestion automatique des doublons.

### Ã‰tapes

1. **Essayer de rejoindre avec un nom existant**

   - Ouvrir un nouvel onglet sur `/player?session=[CODE]`
   - Saisir le nom : "Alice" (dÃ©jÃ  utilisÃ©)
   - Cliquer sur "Rejoindre"
   - âœ… VÃ©rifier que le joueur est crÃ©Ã© avec le nom "Alice (1)"
   - âœ… VÃ©rifier affichage correct sur toutes les interfaces

2. **Tester un deuxiÃ¨me doublon**
   - Essayer encore avec "Alice"
   - âœ… VÃ©rifier crÃ©ation de "Alice (2)"

---

## ðŸ§ª Parcours 5 : Verrouillage des Inscriptions

### Objectif

Tester le verrouillage et le blocage des nouvelles inscriptions.

### Ã‰tapes

1. **Fermer les inscriptions**

   - Sur `/host/[sessionId]`
   - Cliquer sur "Fermer les inscriptions"
   - âœ… VÃ©rifier changement de statut vers "LOCKED"
   - âœ… VÃ©rifier disparition du bouton "Fermer les inscriptions"
   - âœ… VÃ©rifier apparition du bouton "Lancer le jeu"

2. **VÃ©rifier synchronisation sur /game**

   - Sur `/game/[sessionId]`
   - âœ… VÃ©rifier affichage "Le jeu va commencer !"
   - âœ… VÃ©rifier texte "PrÃ©parez-vous..."
   - âœ… VÃ©rifier disparition du QR code
   - âœ… VÃ©rifier affichage de la liste des joueurs

3. **VÃ©rifier synchronisation sur /player**

   - Sur tous les devices joueurs
   - âœ… VÃ©rifier texte "Le jeu va bientÃ´t commencer !"

4. **Tester blocage des inscriptions**
   - Ouvrir un nouvel onglet sur `/player?session=[CODE]`
   - Essayer de rejoindre avec le nom "Eve"
   - âœ… VÃ©rifier affichage d'une erreur
   - âœ… VÃ©rifier message "Session is not open for registration"

---

## ðŸ§ª Parcours 6 : Lancement du Jeu

### Objectif

Tester le dÃ©marrage du jeu.

### Ã‰tapes

1. **Lancer le jeu**

   - Sur `/host/[sessionId]`
   - Cliquer sur "Lancer le jeu"
   - âœ… VÃ©rifier changement de statut vers "IN_PROGRESS"
   - âœ… VÃ©rifier affichage du message "Jeu en cours"
   - âœ… VÃ©rifier message "Les modules de jeu seront implÃ©mentÃ©s dans la prochaine version"

2. **VÃ©rifier synchronisation sur /game**

   - âœ… VÃ©rifier affichage "Jeu en cours"
   - âœ… VÃ©rifier message placeholder

3. **VÃ©rifier synchronisation sur /player**
   - Sur tous les devices joueurs
   - âœ… VÃ©rifier texte "Jeu en cours"

---

## ðŸ§ª Parcours 7 : Synchronisation Temps RÃ©el

### Objectif

VÃ©rifier la fiabilitÃ© de la synchronisation Realtime.

### Ã‰tapes

1. **Ouvrir plusieurs interfaces simultanÃ©ment**

   - Ouvrir 4 onglets :
     - `/host/[sessionId]`
     - `/game/[sessionId]`
     - 2x `/player/[sessionId]?playerId=[ID]` (diffÃ©rents joueurs)

2. **CrÃ©er une nouvelle session et tester**

   - CrÃ©er une nouvelle session
   - Publier
   - Ouvrir `/game` sur cette nouvelle session
   - Faire rejoindre 2 joueurs
   - âœ… VÃ©rifier que chaque action se reflÃ¨te sur TOUTES les interfaces en < 500ms
   - âœ… VÃ©rifier qu'aucun rafraÃ®chissement manuel n'est nÃ©cessaire

3. **Tester dÃ©connexion/reconnexion**
   - Fermer un onglet joueur
   - Le rouvrir avec la mÃªme URL
   - âœ… VÃ©rifier que l'Ã©tat est Ã  jour

---

## ðŸ§ª Parcours 8 : Navigation et Retour

### Objectif

Tester la navigation entre les pages.

### Ã‰tapes

1. **Retour Ã  la liste des sessions**

   - Sur `/host/[sessionId]`
   - Utiliser le bouton "retour" du navigateur
   - âœ… VÃ©rifier retour sur `/host`
   - âœ… VÃ©rifier affichage de toutes les sessions crÃ©Ã©es
   - âœ… VÃ©rifier affichage des statuts corrects
   - âœ… VÃ©rifier compteurs de joueurs

2. **AccÃ©der Ã  une session depuis la liste**
   - Cliquer sur "GÃ©rer" d'une session
   - âœ… VÃ©rifier redirection correcte
   - âœ… VÃ©rifier affichage de l'Ã©tat actuel

---

## ðŸ§ª Parcours 9 : Responsive Design

### Objectif

VÃ©rifier l'affichage sur diffÃ©rentes tailles d'Ã©cran.

### Ã‰tapes

1. **Interface /host (Desktop)**

   - Tester sur Ã©cran large (1920x1080)
   - âœ… VÃ©rifier grille 3 colonnes visible
   - âœ… VÃ©rifier lisibilitÃ©
   - Tester sur Ã©cran moyen (1280x720)
   - âœ… VÃ©rifier adaptation responsive

2. **Interface /game (TV)**

   - Tester sur grand Ã©cran
   - âœ… VÃ©rifier QR code bien visible
   - âœ… VÃ©rifier texte lisible Ã  distance
   - âœ… VÃ©rifier grille de joueurs bien espacÃ©e

3. **Interface /player (Mobile)**
   - Tester sur mobile (375x667)
   - âœ… VÃ©rifier formulaire bien dimensionnÃ©
   - âœ… VÃ©rifier boutons accessibles
   - âœ… VÃ©rifier liste de joueurs scrollable si nÃ©cessaire

---

## ðŸ§ª Parcours 10 : Gestion d'Erreurs

### Objectif

Tester la robustesse de l'application.

### Ã‰tapes

1. **Session inexistante**

   - Aller sur `/game/invalid-id`
   - âœ… VÃ©rifier affichage page 404
   - Aller sur `/host/invalid-id`
   - âœ… VÃ©rifier affichage page 404

2. **Code de session invalide**

   - Sur `/player`
   - Saisir un code inexistant : "XXXXXX"
   - Essayer de rejoindre
   - âœ… VÃ©rifier affichage erreur "Session introuvable"

3. **Champs vides**
   - Sur `/host/create`
   - Essayer de soumettre sans remplir les champs
   - âœ… VÃ©rifier validation HTML5
   - Sur `/player`
   - Essayer de rejoindre sans nom
   - âœ… VÃ©rifier validation

---

## ðŸ“Š Checklist Finale

### FonctionnalitÃ©s Core

- [ ] CrÃ©ation de session
- [ ] Publication de session
- [ ] GÃ©nÃ©ration de code unique
- [ ] GÃ©nÃ©ration de QR code
- [ ] Inscription de joueurs
- [ ] Gestion des doublons de noms
- [ ] Attribution automatique de couleurs
- [ ] Verrouillage des inscriptions
- [ ] Lancement du jeu
- [ ] Synchronisation temps rÃ©el (< 500ms)

### Interfaces

- [ ] `/host` - Liste des sessions
- [ ] `/host/create` - CrÃ©ation
- [ ] `/host/[sessionId]` - ContrÃ´le
- [ ] `/game/[sessionId]` - Affichage TV
- [ ] `/player` - Formulaire de connexion
- [ ] `/player/[sessionId]` - Salle d'attente

### Ã‰tats de Session

- [ ] DRAFT
- [ ] PUBLISHED
- [ ] OPEN
- [ ] LOCKED
- [ ] IN_PROGRESS
- [ ] FINISHED

### Synchronisation Realtime

- [ ] session:updated
- [ ] session:published
- [ ] session:locked
- [ ] session:started
- [ ] player:joined

### Responsive

- [ ] Desktop (1920x1080)
- [ ] Laptop (1280x720)
- [ ] Tablet (768x1024)
- [ ] Mobile (375x667)

### Gestion d'Erreurs

- [ ] Session inexistante
- [ ] Code invalide
- [ ] Validation des formulaires
- [ ] Session fermÃ©e

---

## ðŸ› Bugs Connus Ã  VÃ©rifier

Si vous rencontrez ces problÃ¨mes, notez-les :

1. **Synchronisation lente** : Si les mises Ã  jour prennent > 1 seconde
2. **QR code ne se gÃ©nÃ¨re pas** : VÃ©rifier console navigateur
3. **Erreur Prisma** : VÃ©rifier que les migrations sont appliquÃ©es
4. **Erreur Supabase** : VÃ©rifier que Realtime est activÃ©
5. **Doublons non gÃ©rÃ©s** : VÃ©rifier la logique dans `player.service.ts`

---

## âœ… Validation ComplÃ¨te

Une fois tous les parcours effectuÃ©s avec succÃ¨s, l'application est validÃ©e pour la **Version CÅ“ur v1** ! ðŸŽ‰
